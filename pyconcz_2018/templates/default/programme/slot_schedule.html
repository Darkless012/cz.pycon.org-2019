{% extends "_layout.html" %}


{% block meta_title %}Schedule – {{ block.super }}{% endblock %}


{% block main %}
    <div class="container-fluid">

        <nav role="navigation">
            {% include '_menu_programme.html' with pc_alignment='center' %}
        </nav>

        <h1>Schedule</h1>

        {# Temporary schedule #}
        <section class="">
            <div class="">
                <h2 class="">Thursday,<br> 08 June</h2>
                <p class="">MeetFactory</p>
                <p class="">
                    Registration
                    <span class="">9&nbsp;am–10&nbsp;am</span>
                </p>
                <p class="">
                    Talks
                    <span class="">10&nbsp;am–6&nbsp;pm</span>
                </p>
            </div>

            <div class="">
                <h2 class="">Friday,<br> 09 June</h2>
                <p class="">MeetFactory</p>
                <p class="">
                    Registration
                    <span class="">9&nbsp;am–10&nbsp;am</span>
                </p>
                <p class="">
                    Talks
                    <span class="">10&nbsp;am–6&nbsp;pm</span>
                </p>
                <p class="">
                    Afterparty
                    <span class="">
                        6&nbsp;pm <strong>till you drop<sup>*</sup></strong><br><small><sup>*</sup>or&nbsp;3&nbsp;am (whichever comes first)</small>
                    </span>
                </p>
            </div>

            <div class="">
                <h2 class="">Saturday,<br> 10 June</h2>
                <p class="">
                    <a href="https://goo.gl/maps/ZA3DoxKdt3m">FIT&nbsp;CTU</a>
                </p>
                <p class="">
                    Sprints and Workshops
                    <span class="">10&nbsp;am–4&nbsp;pm</span>
                </p>
            </div>
        </section>


        {# Full schedule #}

        {% regroup slots by date|date:'l, d F' as slots_by_date %}

        <section class="">

            {% for day in slots_by_date %}
                <div class="">

                    <h2 class="">{{ day.grouper }}</h2>

                    <p class="">
                        {% if day.grouper == 'Sunday, 3 June' %}
                            Sprints and Workshops<br>
                            <a href="https://goo.gl/maps/ZA3DoxKdt3m">FIT&nbsp;CTU</a>
                        {% else %}
                            Talks<br>
                            MeetFactory
                        {% endif %}
                    </p>

                    {% regroup day.list by date as slots_by_time %}

                    {% for slot in slots_by_time %}
                        {% if slot.list.0.description != 'Break' %}
                            <div class="pc_schedule__item {% if slot.list.0.description %}pc_schedule__item--break{% endif %}">
                                <span class="">{{ slot.grouper|time }}</span>
                                {{ slot.list.0.description }}

                                <div class="">
                                    {% for slot_item in slot.list %}
                                        {% if slot_item.content_type or slot_item.description == 'Sprints' %}
                                            <div class="">

                                                <p class="">
                                                    {% for key, value in ALL_ROOMS %}
                                                        {% if slot_item.room == key %} {{ value }} {% endif %}
                                                    {% endfor %}
                                                </p>

                                                {% if slot_item.content_type.model == 'talk' %}
                                                    <a class="" href="{% url 'talk_detail' type='talk' talk_id=slot_item.content_object.id %}#main">
                                                        <span class="">{{ slot_item.content_object.title }}</span>
                                                    </a>
                                                    <span class="">{{ slot_item.content_object.talks.all|join:'<br>' }}</span>
                                                {% elif slot_item.content_type.model == 'workshop' %}
                                                    <a class="" href="{% url 'talk_detail' type='workshop' talk_id=slot_item.content_object.id %}#main">
                                                        <span class="">{{ slot_item.content_object.title }}</span>
                                                    </a>
                                                    <span class="">{{ slot_item.content_object.workshops.all|join:'<br>' }}</span>
                                                {% elif slot_item.description == 'Sprints' %}
                                                    <span class=""><span class="">{{ slot_item.description }}</span></span>
                                                    <span class="">freely accesible for anybody wearing a&nbsp;PyCon&nbsp;CZ badge</span>
                                                {% endif %}

                                            </div>
                                        {% endif %} {% endfor %}
                                </div>

                            </div>
                        {% endif %}
                    {% endfor %}

                </div>
            {% endfor %}

        </section>
    </div>

{% endblock %}
